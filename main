--[[
    üëë SOVEREIGN V46 | ELITE PREMIUM (FIXED)
    OWNER: EgeKazak_Real1
    MODDED: Fixed Loading & AI Tool Spawner
]]

-- GLOBAL KONTROLLER
_G.SovereignActive = true
local connections = {}

-- 1. HATASIZ PREMIUM LOADER (TAKILMAYAN VERSƒ∞YON)
local function UniversalLoader()
    local sg = Instance.new("ScreenGui")
    sg.Name = "SovFixLoader"
    sg.DisplayOrder = 999
    sg.IgnoreGuiInset = true
    
    -- Koruma: Eƒüer CoreGui'ye eri≈üim yoksa PlayerGui'ye kur
    local success, err = pcall(function() sg.Parent = game:GetService("CoreGui") end)
    if not success then sg.Parent = game:GetService("Players").LocalPlayer:WaitForChild("PlayerGui") end

    local bg = Instance.new("Frame", sg)
    bg.Size = UDim2.new(1, 0, 1, 0)
    bg.BackgroundColor3 = Color3.fromRGB(5, 5, 12)
    bg.ZIndex = 1

    local main = Instance.new("Frame", sg)
    main.Size = UDim2.new(0, 400, 0, 200)
    main.Position = UDim2.new(0.5, 0, 0.5, 0)
    main.AnchorPoint = Vector2.new(0.5, 0.5)
    main.BackgroundTransparency = 1
    main.ZIndex = 2

    local title = Instance.new("TextLabel", main)
    title.Size = UDim2.new(1, 0, 0, 50)
    title.Text = "SOVEREIGN APEX V46"
    title.Font = Enum.Font.GothamBold
    title.TextColor3 = Color3.fromRGB(255, 255, 255)
    title.TextSize = 35
    title.BackgroundTransparency = 1

    local status = Instance.new("TextLabel", main)
    status.Position = UDim2.new(0, 0, 0.4, 0)
    status.Size = UDim2.new(1, 0, 0, 30)
    status.Text = "Sistem Ba≈ülatƒ±lƒ±yor..."
    status.Font = Enum.Font.Gotham
    status.TextColor3 = Color3.fromRGB(0, 170, 255)
    status.TextSize = 18
    status.BackgroundTransparency = 1

    local barBg = Instance.new("Frame", main)
    barBg.Position = UDim2.new(0.1, 0, 0.7, 0)
    barBg.Size = UDim2.new(0.8, 0, 0, 4)
    barBg.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    barBg.BorderSizePixel = 0
    local barFill = Instance.new("Frame", barBg)
    barFill.Size = UDim2.new(0, 0, 1, 0)
    barFill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    barFill.BorderSizePixel = 0

    -- Baƒüƒ±msƒ±z Animasyon S√ºreci
    task.spawn(function()
        local ts = game:GetService("TweenService")
        local steps = {"Veriler Okunuyor...", "Hile Kanallarƒ± A√ßƒ±lƒ±yor...", "Elite Hazƒ±r!"}
        
        for i, msg in ipairs(steps) do
            status.Text = msg
            ts:Create(barFill, TweenInfo.new(0.8), {Size = UDim2.new(i/#steps, 0, 1, 0)}):Play()
            task.wait(1)
        end
        
        -- Kapanƒ±≈ü Animasyonu
        ts:Create(bg, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
        ts:Create(title, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
        ts:Create(status, TweenInfo.new(0.5), {TextTransparency = 1}):Play()
        ts:Create(barBg, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
        ts:Create(barFill, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
        task.wait(0.6)
        sg:Destroy()
    end)
end

UniversalLoader()

-- 2. SERVƒ∞SLER & AYARLAR
local lp = game:GetService("Players").LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera

_G.Speed = 16
_G.Jump = 50
_G.FOV = 70
_G.SpeedOn = false
_G.JumpOn = false
_G.FlyOn = false
_G.InfJump = false
_G.SelectedTool = "MoneyGun"

-- 3. AI E≈ûYA VERME (Hatalarƒ± Tolere Eden Sistem)
local function GiveItemAI(name)
    pcall(function()
        -- Remote Check
        local remote = ReplicatedStorage:FindFirstChild("ItemRemote", true) or ReplicatedStorage:FindFirstChild("GiveItem", true)
        if remote then remote:FireServer(name) end
        
        -- Physical Clone
        local tool = ReplicatedStorage:FindFirstChild(name, true)
        if tool and tool:IsA("Tool") then
            tool:Clone().Parent = lp.Backpack
        else
            -- Search by name
            for _, v in pairs(ReplicatedStorage:GetDescendants()) do
                if v:IsA("Tool") and v.Name:lower():find(name:lower()) then
                    v:Clone().Parent = lp.Backpack
                    break
                end
            end
        end
    end)
end

-- 4. RAYFIELD UI
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Window = Rayfield:CreateWindow({
   Name = "üëë SOVEREIGN V46 ELITE",
   LoadingTitle = "Brookhaven System",
   LoadingSubtitle = "by EgeKazak_Real1",
   Theme = "DarkBlue",
   ConfigurationSaving = { Enabled = false }
})

local MainTab = Window:CreateTab("üè† Ana Sayfa", 4483362458)
local MoveTab = Window:CreateTab("‚ö° Hareket", 4483362458)
local TPTab = Window:CreateTab("‚úàÔ∏è I≈üƒ±nlanma", 4483362458)
local ToolTab = Window:CreateTab("üì¶ E≈üyalar", 4483362458)

-- 5. ANA SAYFA (DESTROY BURADA)
MainTab:CreateButton({
    Name = "üóëÔ∏è SCRIPTI YOK ET (Destroy)",
    Callback = function()
        _G.SovereignActive = false
        for _, c in pairs(connections) do c:Disconnect() end
        Rayfield:Destroy()
        local h = lp.PlayerGui:FindFirstChild("SovHUD")
        if h then h:Destroy() end
    end,
})

MainTab:CreateButton({
    Name = "üì¢ REKLAMLARI G√ñSTER",
    Callback = function()
        for _, v in pairs(lp.PlayerGui:GetDescendants()) do
            if v:IsA("GuiObject") and (v.Name:lower():find("ad") or v.Name:lower():find("frame")) then
                v.Visible = true
            end
        end
    end,
})

-- 6. HAREKET (+/- DAHƒ∞L)
MoveTab:CreateToggle({ Name = "Hƒ±z Aktif", Callback = function(v) _G.SpeedOn = v end })
MoveTab:CreateInput({ Name = "Hƒ±z Deƒüeri", Callback = function(v) _G.Speed = tonumber(v) or 16 end })
MoveTab:CreateButton({ Name = "Hƒ±z +10", Callback = function() _G.Speed = _G.Speed + 10 end })
MoveTab:CreateButton({ Name = "Hƒ±z -10", Callback = function() _G.Speed = _G.Speed - 10 end })

MoveTab:CreateDivider()

MoveTab:CreateToggle({ Name = "Zƒ±plama Aktif", Callback = function(v) _G.JumpOn = v end })
MoveTab:CreateInput({ Name = "Zƒ±plama Deƒüeri", Callback = function(v) _G.Jump = tonumber(v) or 50 end })
MoveTab:CreateButton({ Name = "Zƒ±plama +10", Callback = function() _G.Jump = _G.Jump + 10 end })

-- 7. I≈ûINLANMA (Bƒ∞TCOƒ∞N)
TPTab:CreateButton({ Name = "üí∞ Merkez Bankasƒ±", Callback = function() lp.Character:MoveTo(Vector3.new(-10.7, 15.4, 275.0)) end })
TPTab:CreateButton({ Name = "üí∞ Bitcoin Bankasƒ±", Callback = function() lp.Character.HumanoidRootPart.CFrame = CFrame.new(-133.8, -55.4, 231.8) end })

-- 8. E≈ûYALAR (GIVE BUTONU)
ToolTab:CreateDropdown({
    Name = "E≈üya Se√ß",
    Options = {"MoneyGun", "Hammer", "Pizza", "KeyCard", "Camera", "Smartphone", "Briefcase", "Flashlight"},
    CurrentOption = "MoneyGun",
    Callback = function(Option) _G.SelectedTool = Option end,
})

ToolTab:CreateButton({
    Name = "‚úÖ E≈ûYAYI VER (Give)",
    Callback = function()
        GiveItemAI(_G.SelectedTool)
        Rayfield:Notify({Title = "E≈üya Alƒ±ndƒ±", Content = _G.SelectedTool .. " verildi.", Duration = 2})
    end,
})

-- 9. D√ñNG√úLER
local hb = RunService.Heartbeat:Connect(function()
    if not _G.SovereignActive then return end
    pcall(function()
        local char = lp.Character
        local hum = char and char:FindFirstChildOfClass("Humanoid")
        if hum then
            hum.WalkSpeed = _G.SpeedOn and _G.Speed or 16
            hum.JumpPower = _G.JumpOn and _G.Jump or 50
        end
    end)
end)
table.insert(connections, hb)

-- HUD
local function BuildHUD()
    local sg = Instance.new("ScreenGui", lp.PlayerGui); sg.Name = "SovHUD"
    local f = Instance.new("Frame", sg); f.Size = UDim2.new(0, 140, 0, 50); f.Position = UDim2.new(0, 10, 0, 10); f.BackgroundColor3 = Color3.new(0,0,0); f.BackgroundTransparency = 0.5
    Instance.new("UICorner", f)
    local l = Instance.new("TextLabel", f); l.Size = UDim2.new(1,0,1,0); l.BackgroundTransparency = 1; l.TextColor3 = Color3.new(1,1,1); l.Font = Enum.Font.Code; l.TextSize = 10
    task.spawn(function()
        while task.wait(1) and _G.SovereignActive do
            l.Text = string.format("SOV ELITE\nSPD:%d | JMP:%d", _G.Speed, _G.Jump)
        end
    end)
end
BuildHUD()

Rayfield:Notify({Title = "Sovereign Elite", Content = "Script Ba≈ülatƒ±ldƒ±!", Duration = 5})
